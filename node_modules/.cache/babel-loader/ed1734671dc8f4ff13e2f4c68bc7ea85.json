{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/otavio/projects/starwars-reactjs/starwars/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\n\nconst FetchError = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error connecting to the API\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 5\n  }, this);\n};\n\n_c = FetchError;\n\nconst Header = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"STAR FOLKS\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Click on someone to see more\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = Header;\n\nconst Person = ({\n  name,\n  url,\n  selected,\n  onClickHandler\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"character \" + (selected ? \"character-selected\" : \"\"),\n    onClick: () => onClickHandler(name, url),\n    children: name\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n};\n\n_c3 = Person;\n\nconst People = ({\n  people,\n  selected,\n  onSelectCharacter\n}) => {\n  if (people.results) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: people.results.map(character => /*#__PURE__*/_jsxDEV(Person, {\n        name: character.name,\n        url: character.url,\n        selected: character.name === selected ? true : false,\n        onClickHandler: onSelectCharacter\n      }, character.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this);\n  } else return null;\n};\n\n_c4 = People;\n\nfunction PaginatorButton(props) {\n  const direction = props.next ? '>' : '<';\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"button-paginator\",\n    onClick: () => props.onChangePage(props.url),\n    children: direction\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 7\n  }, this);\n}\n\n_c5 = PaginatorButton;\n\nclass Paginator extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelectCharacter = (name, url) => {\n      this.props.onSelectCharacter(name, url);\n    };\n  }\n\n  render() {\n    const data = this.props.people;\n    const character = this.props.characterSelected;\n    const previous = data.previous ? /*#__PURE__*/_jsxDEV(PaginatorButton, {\n      url: data.previous,\n      onChangePage: url => this.props.onChangePage(url)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 38\n    }, this) : \"\";\n    const next = data.next ? /*#__PURE__*/_jsxDEV(PaginatorButton, {\n      url: data.next,\n      next: 1,\n      onChangePage: url => this.props.onChangePage(url)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 30\n    }, this) : \"\";\n    const content = this.props.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 42\n    }, this) : /*#__PURE__*/_jsxDEV(People, {\n      people: data,\n      selected: character,\n      onSelectCharacter: this.handleSelectCharacter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 70\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"paginator\",\n      children: [content, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paginator-buttons\",\n        children: [previous, next]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst CloseButton = ({\n  onClickHandler\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"button-close\",\n    onClick: onClickHandler,\n    children: \"Close\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_c6 = CloseButton;\n\nconst CharacterHeader = ({\n  name,\n  height,\n  mass\n}) => {\n  const mass_str = mass === \"unknown\" ? \"unknown weight\" : mass + \"kg\";\n  const height_str = height === \"unknown\" ? \"unknown height\" : height + \"cm\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"character-header\",\n    children: [name, /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [height_str, \", \", mass_str]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_c7 = CharacterHeader;\n\nconst FilmButton = ({\n  title,\n  url,\n  onClickHandler\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"button\",\n    onClick: () => onClickHandler(url),\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n\n_c8 = FilmButton;\n\nconst FilmBody = ({\n  data\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: data.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"dir. \", data.director]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"film-description\",\n      children: data.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n\n_c9 = FilmBody;\n\nconst CharacterBody = ({\n  data,\n  films,\n  onFilmClick\n}) => {\n  const film_buttons = data.films.map(film => {\n    let title = films[film] ? films[film].title : \"?\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(FilmButton, {\n        title: title,\n        url: film,\n        onClickHandler: onFilmClick\n      }, film, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"character-body\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Skin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), \" \", data.skin_color, /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Hair\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), \" \", data.hair_color, /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Eyes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), \" \", data.eye_color]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Films\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), \" \", film_buttons]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n\n_c10 = CharacterBody;\n\nclass Character extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleCloseFilm = () => {\n      this.setState({\n        active_film: null\n      });\n    };\n\n    this.handleClickFilm = url => {\n      let films = this.state.films;\n      let film_is_cached = false;\n\n      for (var i in films) {\n        if (films[i].url === url) {\n          film_is_cached = true;\n          break;\n        }\n      }\n\n      if (film_is_cached) {\n        this.setState({\n          active_film: url\n        });\n      } else {\n        fetch(url).then(res => res.json()).then(data => {\n          const info = {\n            \"title\": data.title,\n            \"description\": data.opening_crawl,\n            \"director\": data.director\n          };\n          films[url] = info;\n          this.setState({\n            films: films,\n            active_film: url\n          });\n        });\n      }\n    };\n\n    this.state = {\n      character: null,\n      active_film: null,\n      films: [],\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    fetch(this.props.url).then(res => res.json()).then(data => {\n      this.setState({\n        character: data,\n        loading: false\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.character !== this.state.character) {\n      fetch(this.props.url).then(res => res.json()).then(data => {\n        this.setState({\n          character: data,\n          loading: false\n        });\n      });\n    }\n  }\n\n  render() {\n    const character = this.state.character;\n    const active_film = this.state.active_film;\n    const films = this.state.films;\n    let body = null;\n\n    if (active_film) {\n      body = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-back\",\n          onClick: this.handleCloseFilm,\n          children: \"Go back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(FilmBody, {\n          data: films[active_film]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 14\n      }, this);\n    } else body = /*#__PURE__*/_jsxDEV(CharacterBody, {\n      data: character,\n      films: films,\n      onFilmClick: this.handleClickFilm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 14\n    }, this);\n\n    if (character) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"more\",\n        children: [/*#__PURE__*/_jsxDEV(CharacterHeader, {\n          name: character.name,\n          height: character.height,\n          mass: character.mass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), body, /*#__PURE__*/_jsxDEV(CloseButton, {\n          onClickHandler: this.props.onClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this);\n    } else return null;\n  }\n\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangePage = url => {\n      this.setState({\n        loading: true\n      });\n      fetch(url).then(res => res.json()).then(data => {\n        this.setState({\n          people: data,\n          loading: false\n        });\n      }).catch(function (error) {\n        this.setState({\n          fetch_error: true\n        });\n      });\n    };\n\n    this.handleSelectCharacter = (name, url) => {\n      this.setState({\n        selected: [name, url]\n      });\n    };\n\n    this.handleCloseCharacter = () => {\n      this.setState({\n        selected: [null, null]\n      });\n    };\n\n    this.state = {\n      people: [],\n      selected: [null, null],\n      loading: true,\n      fetch_error: null\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://swapi.dev/api/people/').then(res => res.json()).then(data => {\n      this.setState({\n        people: data,\n        loading: false\n      });\n    }).catch(function (error) {\n      this.setState({\n        fetch_error: true\n      });\n    });\n  }\n\n  render() {\n    const paginator = this.state.fetch_error ? /*#__PURE__*/_jsxDEV(FetchError, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 48\n    }, this) : /*#__PURE__*/_jsxDEV(Paginator, {\n      loading: this.state.loading,\n      people: this.state.people,\n      characterSelected: this.state.selected[0],\n      onChangePage: this.handleChangePage,\n      onSelectCharacter: this.handleSelectCharacter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 64\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [paginator, this.state.selected[1] && /*#__PURE__*/_jsxDEV(Character, {\n          url: this.state.selected[1],\n          onClose: this.handleCloseCharacter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"FetchError\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Person\");\n$RefreshReg$(_c4, \"People\");\n$RefreshReg$(_c5, \"PaginatorButton\");\n$RefreshReg$(_c6, \"CloseButton\");\n$RefreshReg$(_c7, \"CharacterHeader\");\n$RefreshReg$(_c8, \"FilmButton\");\n$RefreshReg$(_c9, \"FilmBody\");\n$RefreshReg$(_c10, \"CharacterBody\");","map":{"version":3,"sources":["/home/otavio/projects/starwars-reactjs/starwars/src/App.js"],"names":["React","Component","FetchError","Header","Person","name","url","selected","onClickHandler","People","people","onSelectCharacter","results","map","character","PaginatorButton","props","direction","next","onChangePage","Paginator","constructor","handleSelectCharacter","render","data","characterSelected","previous","content","loading","CloseButton","CharacterHeader","height","mass","mass_str","height_str","FilmButton","title","FilmBody","director","description","CharacterBody","films","onFilmClick","film_buttons","film","skin_color","hair_color","eye_color","Character","handleCloseFilm","setState","active_film","handleClickFilm","state","film_is_cached","i","fetch","then","res","json","info","opening_crawl","componentDidMount","componentDidUpdate","prevProps","prevState","body","onClose","App","handleChangePage","catch","error","fetch_error","handleCloseCharacter","paginator"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\n\nconst FetchError = () => {\n  return (\n    <div>Error connecting to the API</div>\n  );\n}\n\nconst Header = () => {\n  return (\n    <div>\n      <h1>STAR FOLKS</h1>\n      <h3>Click on someone to see more</h3>\n    </div>\n  );\n}\n\nconst Person = ({name, url, selected, onClickHandler}) => {\n  return (\n    <div className={\"character \" + (selected ? \"character-selected\" : \"\")} onClick={() => onClickHandler(name, url)}>\n      {name}\n    </div>\n  );\n}\n\nconst People = ({people, selected, onSelectCharacter}) => {\n  if (people.results) {\n    return (\n        <div>\n            {people.results.map((character) => (\n                <Person key={character.name} name={character.name} url={character.url} selected={character.name === selected ? true : false} onClickHandler={onSelectCharacter} />\n            ))}\n        </div>\n    )\n  } else return null;\n};\n\nfunction PaginatorButton(props) {\n    const direction = props.next ? '>' : '<';\n\n    return (\n      <button className=\"button-paginator\" onClick={() => props.onChangePage(props.url)}> \n        {direction} \n      </button>\n    );  \n}\n\nclass Paginator extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  handleSelectCharacter= (name, url) => {\n    this.props.onSelectCharacter(name, url);\n  }\n\n  render() {\n    const data = this.props.people;\n    const character = this.props.characterSelected;\n    const previous = data.previous ? <PaginatorButton url={data.previous} onChangePage={(url) => this.props.onChangePage(url)} /> : \"\";\n    const next = data.next ? <PaginatorButton url={data.next} next={1} onChangePage={(url) => this.props.onChangePage(url)} /> : \"\";\n\n    const content = this.props.loading ? <div className=\"loader\"/> : <People people={data} selected={character} onSelectCharacter={this.handleSelectCharacter} />;\n\n    return (\n      <div className=\"paginator\">\n        {content}\n        \n        <div className=\"paginator-buttons\">\n          {previous}\n          {next}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst CloseButton = ({onClickHandler}) => {\n  return (\n    <div className={\"button-close\"} onClick={onClickHandler}>\n      Close\n    </div>\n  );\n}\n\nconst CharacterHeader = ({name, height, mass}) => {\n  const mass_str = mass === \"unknown\" ? \"unknown weight\" : mass + \"kg\"\n  const height_str = height === \"unknown\" ? \"unknown height\" : height + \"cm\"\n\n  return (\n    <div className=\"character-header\">\n      {name}\n      <div>\n        {height_str}, {mass_str}\n      </div>\n    </div>\n  );\n}\n\nconst FilmButton = ({title, url, onClickHandler}) => {\n  return (\n    <button className=\"button\" onClick={() => onClickHandler(url)}>{title}</button>\n  );\n}\n\nconst FilmBody = ({data}) => {\n  return (\n    <div>\n      <h1>{data.title}</h1>\n      <h3>dir. {data.director}</h3>\n    \n      <div className=\"film-description\">\n        {data.description}\n      </div>\n    </div>\n  );\n}\n\nconst CharacterBody = ({data, films, onFilmClick}) => {\n  const film_buttons = data.films.map((film) => {\n    let title = films[film] ? films[film].title : \"?\";\n    return (\n      <div>\n        <FilmButton key={film} title={title} url={film} onClickHandler={onFilmClick} />\n      </div>\n    );\n  });\n\n  return (\n    <div className=\"character-body\">\n      <div>\n        <p>Skin</p> {data.skin_color}\n        <p>Hair</p> {data.hair_color}\n        <p>Eyes</p> {data.eye_color}\n      </div>\n\n      <div>\n        <p>Films</p> {film_buttons}\n      </div>\n    </div>\n  );\n}\n\nclass Character extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      character: null,\n      active_film: null,\n      films: [],\n      loading: false\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    })\n    fetch(this.props.url)\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({\n          character: data,\n          loading: false\n        })\n      })\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.character !== this.state.character) {\n      fetch(this.props.url)\n        .then(res => res.json())\n        .then((data) => {\n          this.setState({\n            character: data,\n            loading: false\n          })\n        })\n    }\n  }\n\n  handleCloseFilm = () => {\n    this.setState({\n      active_film: null\n    })\n  }\n\n  handleClickFilm = (url) => {\n    let films = this.state.films;\n    let film_is_cached = false;\n\n    for (var i in films) {\n      if (films[i].url === url) {\n        film_is_cached = true;\n        break;\n      }\n    }\n\n    if (film_is_cached) {\n      this.setState({\n        active_film: url\n      });\n    } \n    else {\n      fetch(url)\n        .then(res => res.json())\n        .then((data) => {\n          const info = {\"title\": data.title, \"description\": data.opening_crawl, \"director\": data.director}\n          films[url] = info;\n\n          this.setState({\n            films: films,\n            active_film: url\n          })\n        })\n    }\n  }\n\n  render() {\n    const character = this.state.character;\n    const active_film = this.state.active_film;\n    const films = this.state.films;\n    let body = null;\n\n    if (active_film) {\n      body = <div>\n        <button className=\"button-back\" onClick={this.handleCloseFilm}>Go back</button>\n        <FilmBody data={films[active_film]} />\n        </div>;\n    }\n    else \n      body = <CharacterBody data={character} films={films} onFilmClick={this.handleClickFilm} />;\n\n    if (character) {\n      return (\n        <div className=\"more\"> \n          <CharacterHeader name={character.name} height={character.height} mass={character.mass} />\n          {body}\n\n          <CloseButton onClickHandler={this.props.onClose} />\n        </div>\n      );\n    }\n    else return null;\n  }\n\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        people: [],\n        selected: [null, null],\n        loading: true,\n        fetch_error: null\n    }\n  }\n  \n  componentDidMount() {\n    fetch('http://swapi.dev/api/people/')\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({ \n          people: data,\n          loading: false\n        })\n      })\n      .catch(function(error) {\n        this.setState({\n          fetch_error: true\n        });\n      })\n  }\n\n  handleChangePage = (url) => {\n    this.setState({\n      loading: true\n    });\n\n    fetch(url)\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({ \n          people: data,\n          loading: false\n        })\n      })\n      .catch(function(error) {\n        this.setState({\n          fetch_error: true\n        });\n      })\n  }\n\n  handleSelectCharacter = (name, url) => {\n    this.setState({\n      selected: [name, url]\n    });\n  }\n\n  handleCloseCharacter = () => {\n    this.setState({\n      selected: [null, null]\n    })\n  }\n\n  render() {\n    const paginator = this.state.fetch_error ? <FetchError />: <Paginator loading={this.state.loading} people={this.state.people} characterSelected={this.state.selected[0]} onChangePage={this.handleChangePage} onSelectCharacter={this.handleSelectCharacter} />;\n\n    return (\n      <div>\n        <Header />\n\n        <div>\n          {paginator}\n\n          {this.state.selected[1] && \n            <Character url={this.state.selected[1]} onClose={this.handleCloseCharacter} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}